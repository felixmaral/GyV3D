<!DOCTYPE html>
<html>
  <head>
    <title>Breakout Game</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
      #canvas {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="canvas"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
      // Crea la escena
    const scene = new THREE.Scene();

    const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
    scene.add(ambientLight);

    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
    directionalLight.position.set(0, 0, 1);
    scene.add(directionalLight);

    // Crea la cámara
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.6, 100);
    camera.position.z = 6;
    camera.position.y = -1;
    camera.rotation.x = 0.2;

    // Crea el renderizador
    const renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Crea los bordes del rectángulo
    const borderGeometry = new THREE.BoxGeometry(0.1, 4, 1);
    const borderMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });

    const leftBorder = new THREE.Mesh(borderGeometry, borderMaterial);
    leftBorder.position.x = -1.9;
    leftBorder.position.y = 0;
    leftBorder.position.z = 0.5;
    scene.add(leftBorder);

    const rightBorder = new THREE.Mesh(borderGeometry, borderMaterial);
    rightBorder.position.x = 1.9;
    rightBorder.position.y = 0;
    rightBorder.position.z = 0.5;
    scene.add(rightBorder);

    const topBorder = new THREE.Mesh(borderGeometry, borderMaterial);
    topBorder.rotation.z = Math.PI / 2;
    topBorder.position.x = 0;
    topBorder.position.y = 1.9;
    topBorder.position.z = 0.5;
    scene.add(topBorder);

    const bottomBorder = new THREE.Mesh(borderGeometry, borderMaterial);
    bottomBorder.rotation.z = Math.PI / 2;
    bottomBorder.position.x = 0;
    bottomBorder.position.y = -1.9;
    bottomBorder.position.z = 0.5;
    scene.add(bottomBorder);

    // Crea los ladrillos del rectángulo
    const brickGeometry = new THREE.BoxGeometry(0.5, 0.3, 0.3);
    var brickTexture = new THREE.TextureLoader().load("madera.jpeg");
    const brickMaterial = new THREE.MeshBasicMaterial({
         map : brickTexture
    });

    const leftBrick = new THREE.Mesh(brickGeometry, brickMaterial);
    leftBrick.position.x = -0.8;
    leftBrick.position.y = 1.7;
    leftBrick.position.z = 0.5;
    scene.add(leftBrick);

    const centerBrick = new THREE.Mesh(brickGeometry, brickMaterial);
    centerBrick.position.x = 0;
    centerBrick.position.y = 1.7;
    centerBrick.position.z = 0.5;
    scene.add(centerBrick);

    const rightBrick = new THREE.Mesh(brickGeometry, brickMaterial);
    rightBrick.position.x = 0.8;
    rightBrick.position.y = 1.7;
    rightBrick.position.z = 0.5;
    scene.add(rightBrick);

    // Crea la base móvil
    const baseGeometry = new THREE.BoxGeometry(0.8, 0.3, 0.3);
    const baseMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 }); // Color verde

    const base = new THREE.Mesh(baseGeometry, baseMaterial);
    base.position.x = 0;
    base.position.y = -1.8;
    base.position.z = 0.5;
    scene.add(base);

    // Agrega un evento de teclado para detectar cuándo se presionan las teclas de flecha
    document.addEventListener('keydown', (event) => {
      switch (event.keyCode) {
        case 37: // Flecha izquierda
          base.position.x -= 0.1;
          break;
        case 39: // Flecha derecha
          base.position.x += 0.1;
          break;
      }
    });

    // Crea la bola
    const ballGeometry = new THREE.SphereGeometry(0.2, 32, 32);
    const ballMaterial = new THREE.MeshBasicMaterial({ color: 0x0000ff }); // Color azul

    const ball = new THREE.Mesh(ballGeometry, ballMaterial);
    ball.position.x = 0;
    ball.position.y = 0;
    ball.position.z = 0.5;
    scene.add(ball);

    // Añade la animación para que la bola rebote
    let xSpeed = 0.02;
    let ySpeed = 0.02;

    function animate() {
      requestAnimationFrame(animate);

      ball.position.x += xSpeed;
      ball.position.y += ySpeed;

      // Comprueba si la bola ha chocado con un borde
      if (ball.position.x > 1.4 || ball.position.x < -1.4) {
        xSpeed = -xSpeed;
      }

      if (ball.position.y > 1.4 || ball.position.y < -1.4) {
        ySpeed = -ySpeed;
      }

      // Comprueba si la bola ha chocado con un ladrillo
      if (ball.position.y > 0.5 && ball.position.y < 1.5) {
        if (ball.position.x > -1 && ball.position.x < 0.75) {
      // ha chocado con el ladrillo izquierdo
      scene.remove(leftBrick);
      ySpeed = -ySpeed;
      } else if (ball.position.x > -0.5 && ball.position.x < 0.5) {
      // ha chocado con el ladrillo central
      scene.remove(middleBrick);
      ySpeed = -ySpeed;
      } else if (ball.position.x > 0.5 && ball.position.x < 1) {
      // ha chocado con el ladrillo derecho
      scene.remove(rightBrick);
      ySpeed = -ySpeed;
      }
      }

      renderer.render(scene, camera);
      }

      animate();
    </script>
  </body>
</html>



